<?xml version="1.0" encoding="UTF-8"?>
<chapter id="whats-new">
  <title>What's New?</title>

  <subtitle>Changes in This OpenNMS</subtitle>

  <section id="opennms-1.6.0">
    <title>Changes in OpenNMS 1.6.0</title>
    
    <para>
    	OpenNMS 1.5.99 passed release candidate testing and was re-tagged as 1.6.0.
    </para>
  </section>

  <section id="opennms-1.5.99">
    <title>Changes in OpenNMS 1.5.99</title>
    
    <section id="opennms-1.5.99-bugfixes">
      <title>Bug Fixes</title>

      <itemizedlist>

        <listitem>
          <para>A bug in the poller which caused the reason code not to be associated
            with node lost service events was fixed.  (Bug <ulink
            url="http://bugzilla.opennms.org/show_bug.cgi?id=2846">#2846</ulink>)</para>
        </listitem>

      </itemizedlist>
    </section>
  </section>
    
  <section id="opennms-1.5.98">
    <title>Changes in OpenNMS 1.5.98</title>
    
    <section id="opennms-1.5.98-bugfixes">
      <title>Bug Fixes</title>

      <itemizedlist>

        <listitem>
          <para>A bug in the OTRS integration was fixed.  (Bug <ulink
            url="http://bugzilla.opennms.org/show_bug.cgi?id=2835">#2835</ulink>)</para>
        </listitem>

        <listitem>
          <para>A critical bug in the poller and HTTP monitor which could cause
          services from being restored in some cases was fixed.  (Bugs <ulink
          url="http://bugzilla.opennms.org/show_bug.cgi?id=2841">#2841</ulink> and
          <ulink url="http://bugzilla.opennms.org/show_bug.cgi?id=2842">#2842</ulink>)</para>
        </listitem>

      </itemizedlist>
    </section>
  </section>
    
  <section id="opennms-1.5.97">
    <title>Changes in OpenNMS 1.5.97</title>

    <section id="opennms-1.5.97-features">
      <title>New Features</title>

      <itemizedlist>

        <listitem>
          <para>When searching for a node, if the search returns only a single node,
          it will redirect directly to the node page.  (Bug <ulink
          url="http://bugzilla.opennms.org/show_bug.cgi?id=1518">#1518</ulink>)</para>
        </listitem>

        <listitem>
          <para>Support for new Ricoh/Savin Printer data collections was added. (Bug <ulink
          url="http://bugzilla.opennms.org/show_bug.cgi?id=1941">#1941</ulink>)</para>
        </listitem>

        <listitem>
          <para>The default thresholding behavior has been changed to use the new
          in-line collectd-based thresholder. (Bug <ulink
          url="http://bugzilla.opennms.org/show_bug.cgi?id=2611">#2611</ulink>)</para>
        </listitem>
        
        <listitem>
          <para>The comment field in assets no longer has a size limit. (Bug <ulink
          url="http://bugzilla.opennms.org/show_bug.cgi?id=2763">#2763</ulink>)</para>
        </listitem>
        
        <listitem>
          <para>The default logging level is now WARN instead of DEBUG.  (Bug <ulink
          url="http://bugzilla.opennms.org/show_bug.cgi?id=2796">#2796</ulink>)</para>
        </listitem>
        
        <listitem>
          <para>PostgreSQL 8.3 is now officially supported in the installer.  (Bug <ulink
          url="http://bugzilla.opennms.org/show_bug.cgi?id=2808">#2808</ulink>)</para>
        </listitem>
        
      </itemizedlist>
    </section>

    <section id="opennms-1.5.97-bugfixes">
      <title>Bug Fixes</title>

      <itemizedlist>

        <listitem>
          <para>A bug in the scheduled outages UI was fixed.  (Bug <ulink
            url="http://bugzilla.opennms.org/show_bug.cgi?id=2670">#2670</ulink>)</para>
        </listitem>

        <listitem>
          <para>A number of thread concurrency issues have been fixed.  (Bug <ulink
          url="http://bugzilla.opennms.org/show_bug.cgi?id=2715">#2715</ulink>)</para>
        </listitem>

        <listitem>
		  <para>The HTTP collector now handles string attributes correctly.  (Bug <ulink
		  url="http://bugzilla.opennms.org/show_bug.cgi?id=2806">#2806</ulink>)</para>
		</listitem>
		
		<listitem>
          <para>
            A few other bugs have been fixed since 1.5.96, in the process
            of preparing for 1.6.0.  A full list of bugs fixed in the release can be
            found in <ulink url="http://bugzilla.opennms.org/buglist.cgi?query_format=advanced&amp;target_milestone=1.5.97+%281.6+beta+8%29&amp;bug_status=VERIFIED&amp;cmdtype=doit">bugzilla</ulink>.
          </para>
        </listitem>
      
      </itemizedlist>
      
    </section>
    
  </section>
      
  <section id="opennms-1.5.96">
    <title>Changes in OpenNMS 1.5.96</title>

    <section id="opennms-1.5.96-bugfixes">
      <title>Bug Fixes</title>

      <itemizedlist>

        <listitem>
          <para>An exception introduced into the notification browser as part of the
          XSS security fixes was made unexceptional.  (Bug <ulink
          url="http://bugzilla.opennms.org/show_bug.cgi?id=2776">#2776</ulink>)</para>
        </listitem>

      </itemizedlist>
    </section>
  </section>
      
  <section id="opennms-1.5.95">
    <title>Changes in OpenNMS 1.5.95</title>

    <section id="opennms-1.5.95-features">
      <title>New Features</title>

      <itemizedlist>

        <listitem>
          <para>Nodes in category list are now sorted by name.  (Bug <ulink
          url="http://bugzilla.opennms.org/show_bug.cgi?id=2708">#2708</ulink>)</para>
        </listitem>

      </itemizedlist>
    </section>
    
    <section id="opennms-1.5.95-bugfixes">
      <title>Bug Fixes</title>

      <para>A bug in the poller that would cause failed services to be shown
      as available was fixed.  (Bug
      <ulink url="http://bugzilla.opennms.org/show_bug.cgi?id=2769">#2769</ulink>)
      </para>
      
      <para>A few other bugs have been fixed since 1.5.94, in the process
      of preparing for 1.6.0.  A full list of bugs fixed in the release can be
      found in <ulink url="http://bugzilla.opennms.org/buglist.cgi?query_format=advanced&amp;target_milestone=1.5.95+%281.6+beta+6%29&amp;bug_status=VERIFIED&amp;cmdtype=doit">bugzilla</ulink>.</para>

      <para>A number of security issues have been fixed.  (Bug
      <ulink url="http://bugzilla.opennms.org/show_bug.cgi?id=2760">#2760</ulink>)
      </para>

    </section>

    
  </section>

  <section id="opennms-1.5.94">
    <title>Changes in OpenNMS 1.5.94</title>

    <section id="opennms-1.5.94-features">
      <title>New Features</title>

      <itemizedlist>
        <listitem>
          <para>OpenNMS now has provisional support for PostgreSQL 8.3.  All known bugs
          have been fixed, but there may be some corner cases left that aren't covered by
          unit tests.  To use OpenNMS with PostgreSQL 8.3, you will need to run the install
          tool with the "-Q" option. (Bug <ulink
          url="http://bugzilla.opennms.org/show_bug.cgi?id=2613">#2613</ulink>)</para>
        </listitem>
        
        <listitem>
          <para>OpenNMS now automatically writes a thread dump to output.log on
          shutdown, for easier debugging. (Bug <ulink
          url="http://bugzilla.opennms.org/show_bug.cgi?id=2181">#2181</ulink>)</para>
        </listitem>
        
        <listitem>
          <para>SNMP parameters can now be set in the Collectd configuration. (Bug <ulink
          url="http://bugzilla.opennms.org/show_bug.cgi?id=2195">#2195</ulink>)</para>
        </listitem>
        
        <listitem>
          <para>Relative thresholds can now use negative numbers.  Additionally, you can
          now threshold on absolute changes as well (loss in dB on fiber links, etc.) (Bugs
          <ulink
          url="http://bugzilla.opennms.org/show_bug.cgi?id=2275">#2275</ulink> and
          <ulink
          url="http://bugzilla.opennms.org/show_bug.cgi?id=2604">#2604</ulink>)</para>
        </listitem>
        
        <listitem>
          <para>XmlRpcNotifier now allows a timeout parameter. (Bug <ulink
          url="http://bugzilla.opennms.org/show_bug.cgi?id=2342">#2342</ulink>)</para>
        </listitem>
        
        <listitem>
          <para>The java web start remote poller can now be run in a headless mode.
          See <ulink url="http://www.opennms.org/index.php/Remote_Poller">this page</ulink>
          for configuration details. (Bug <ulink
          url="http://bugzilla.opennms.org/show_bug.cgi?id=2354">#2354</ulink>)</para>
        </listitem>
        
        <listitem>
          <para>Asset comments now retain formatting.  In addition, the exporter creates
          real CSV files, so you can have asset data with commas in them. ;) (Bug <ulink
          url="http://bugzilla.opennms.org/show_bug.cgi?id=2363">#2363</ulink>)</para>
        </listitem>

        <listitem>
	      <para>The OSS/J QoS interface has been enhanced in a number of ways, mostly
	      related to documentation and simplifying importing.  See <ulink
	      url="http://bugzilla.opennms.org/show_bug.cgi?id=2618">bug #2618</ulink>
	      for details.</para>
	    </listitem>
	    
	    <listitem>
	      <para>A new ticketing plugin for <ulink
	      url="http://otrs.org/">OTRS</ulink> has been added.  (Bug <ulink
	      url="http://bugzilla.opennms.org/show_bug.cgi?id=2658">#2658</ulink>)</para>
	    </listitem>
	    
	    <listitem>
	      <para>Initial support was added for interfacing with devices that speak
         Transactional Language 1, or TL-1.  (Bug <ulink
	      url="http://bugzilla.opennms.org/show_bug.cgi?id=2693">#2693</ulink>)</para>
	    </listitem>

	    <listitem>
	      <para>The HTTP Collector can now substitute IP addresses in URLs it's
	      collecting from  (Bug <ulink
	      url="http://bugzilla.opennms.org/show_bug.cgi?id=2590">#2590</ulink>)</para>
	    </listitem>

        <listitem>	
	      <para>Support for new Aedilis, Cisco, Citrix, Compaq, McAfee, Polycom,
	      Radlan, and UPS-MIB traps (Bugs <ulink
	      url="http://bugzilla.opennms.org/show_bug.cgi?id=2511">#2511</ulink>,
	      <ulink
	      url="http://bugzilla.opennms.org/show_bug.cgi?id=2542">#2542</ulink>,
	      <ulink
	      url="http://bugzilla.opennms.org/show_bug.cgi?id=2554">#2554</ulink>,
	      <ulink
	      url="http://bugzilla.opennms.org/show_bug.cgi?id=2566">#2566</ulink>,
	      <ulink
	      url="http://bugzilla.opennms.org/show_bug.cgi?id=2581">#2581</ulink>,
	      <ulink
	      url="http://bugzilla.opennms.org/show_bug.cgi?id=2598">#2598</ulink>,
	      <ulink
	      url="http://bugzilla.opennms.org/show_bug.cgi?id=2599">#2599</ulink>,
	      <ulink
	      url="http://bugzilla.opennms.org/show_bug.cgi?id=2643">#2643</ulink>,
	      <ulink
	      url="http://bugzilla.opennms.org/show_bug.cgi?id=2671">#2671</ulink>,
	      and <ulink
	      url="http://bugzilla.opennms.org/show_bug.cgi?id=2722">#2722</ulink>)</para>
	    </listitem>
	    
	    <listitem>
	      <para>Support for new Brocade, Citrix, Dell, Fortinet, HP-UX, Kyocera,
	      Liebert, Novell, and SNMP Informant data collections (Bugs <ulink
	      url="http://bugzilla.opennms.org/show_bug.cgi?id=2370">#2370</ulink>,
	      <ulink
	      url="http://bugzilla.opennms.org/show_bug.cgi?id=2371">#2371</ulink>,
	      <ulink
	      url="http://bugzilla.opennms.org/show_bug.cgi?id=2391">#2391</ulink>,
	      <ulink
	      url="http://bugzilla.opennms.org/show_bug.cgi?id=2511">#2511</ulink>,
	      <ulink
	      url="http://bugzilla.opennms.org/show_bug.cgi?id=2579">#2579</ulink>,
	      <ulink
	      url="http://bugzilla.opennms.org/show_bug.cgi?id=2624">#2624</ulink>,
	      <ulink
	      url="http://bugzilla.opennms.org/show_bug.cgi?id=2629">#2629</ulink>,
	      <ulink
          url="http://bugzilla.opennms.org/show_bug.cgi?id=2663">#2663</ulink>,
          <ulink
          url="http://bugzilla.opennms.org/show_bug.cgi?id=2686">#2686</ulink>,
          and <ulink
          url="http://bugzilla.opennms.org/show_bug.cgi?id=2700">#2700</ulink>)</para>
        </listitem>
      </itemizedlist>

    </section>

    <section id="opennms-1.5.94-bugfixes">
      <title>Bug Fixes</title>

      <para>A rare but insidious bug in the poller that caused some outages to not
      be properly resolved was fixed.  (Bug
      <ulink url="http://bugzilla.opennms.org/show_bug.cgi?id=2702">#2702</ulink>)
      </para>
      
      <para>A large number of other bugs have been fixed since 1.5.93, in the process
      of preparing for 1.6.0.  A full list of bugs fixed in the release can be
      found in <ulink url="http://bugzilla.opennms.org/buglist.cgi?query_format=advanced&amp;target_milestone=1.5.94+%281.6+beta+5%29&amp;bug_status=VERIFIED&amp;cmdtype=doit">bugzilla</ulink>.</para>

      <para>A number of cross-site scripting (XSS) security issues have been fixed.  (Bugs
      <ulink url="http://bugzilla.opennms.org/show_bug.cgi?id=2631">#2631</ulink>,
      <ulink url="http://bugzilla.opennms.org/show_bug.cgi?id=2633">#2633</ulink>,
      and <ulink url="http://bugzilla.opennms.org/show_bug.cgi?id=2634">#2634</ulink>)
      </para>

    </section>

    <section id="opennms-1.5.94-changes">
    
      <title>Changes</title>

      <para>In the plugins for capsd and the monitors for the service poller,
      the correct parameter to use for retries is "retry" however some used
      "retries". This has been corrected, but on upgrading one may want to
      change the configuration files if they have been customized. Those
      changed were:</para>

      <itemizedlist>
        <listitem>
          <para>service poller monitors:</para>

          <itemizedlist>
            <listitem>
              <para>SNMP Monitor</para>
            </listitem>
          </itemizedlist>

          <itemizedlist>
            <listitem>
              <para>OMSA Storage Monitor</para>
            </listitem>
          </itemizedlist>

          <itemizedlist>
            <listitem>
              <para>PERC Monitor</para>
            </listitem>
          </itemizedlist>

          <itemizedlist>
            <listitem>
              <para>Disk Usage Monitor</para>
            </listitem>
          </itemizedlist>
        </listitem>
      </itemizedlist>

      <itemizedlist>
        <listitem>
          <para>capsd plugins:</para>

          <itemizedlist>
            <listitem>
              <para>NTP Plugin</para>
            </listitem>
          </itemizedlist>

          <itemizedlist>
            <listitem>
              <para>DNS Plugin</para>
            </listitem>
          </itemizedlist>
        </listitem>
      </itemizedlist>

      <para>The default RRD roll-up schedule for data collected using the
      NSClient Collector has been changed to match that used for some time by
      the SNMP Collector. When upgrading to release 1.5.94, users who rely on
      NSClient data collection and do not wish to lose any historical data must
      take care to preserve the existing roll-up schedule in the
      nsclient-datacollection-config.xml file. Users who are not concerned with
      keeping historical NSClient performance data can adopt the new roll-up
      schedule, but will need to delete all RRD files created while the old
      roll-up schedule was in effect. Failure to do so will result in new data
      not being stored.</para>

    </section>
    
  </section>

  <section id="opennms-1.5.93">
    <title>Changes in OpenNMS 1.5.93</title>

    <section id="opennms-1.5.93-features">
      <title>New Features</title>

      <para>This is a quick bugfix release, no new feature were added.</para>
    </section>

    <section id="opennms-1.5.93-bugfixes">
      <title>Bug Fixes</title>

      <para>This release is intended primarily to solve an issue in SNMP4J
      which could cause performance issues from excessive logging in some
      situations. (Bug <ulink
      url="http://bugzilla.opennms.org/show_bug.cgi?id=2552">#2552</ulink>)</para>

      <para>In addition, the installer was updated to not force a specific
      amount of memory when run, so it should work with large databases
      without the need to edit the upgrade script.</para>
    </section>
  </section>

  <section id="opennms-1.5.92">
    <title>Changes in OpenNMS 1.5.92</title>

    <section id="opennms-1.5.92-features">
      <title>New Features</title>

      <para>Xmlrpcd has been improved to allow multicasting events as well as
      a few other changes. (Bug <ulink
      url="http://bugzilla.opennms.org/show_bug.cgi?id=1487">#1487</ulink>)</para>

      <para>Support for logging logins, failed login attempts, logouts, and
      session timeouts was added. (Bug <ulink
      url="http://bugzilla.opennms.org/show_bug.cgi?id=1580">#1580</ulink>)</para>

      <para>Support for new Juniper, Cisco, Sonus, and VMware traps (Bugs
      <ulink
      url="http://bugzilla.opennms.org/show_bug.cgi?id=2368">#2368</ulink>,
      <ulink
      url="http://bugzilla.opennms.org/show_bug.cgi?id=2487">#2487</ulink>,
      <ulink
      url="http://bugzilla.opennms.org/show_bug.cgi?id=2500">#2500</ulink>,
      <ulink
      url="http://bugzilla.opennms.org/show_bug.cgi?id=2502">#2502</ulink>,
      and <ulink
      url="http://bugzilla.opennms.org/show_bug.cgi?id=2540">#2540</ulink>)</para>

      <para>Support for new Asterisk, Juniper, Cisco, Windows, Mikrotik, and
      UCD data collections (Bugs <ulink
      url="http://bugzilla.opennms.org/show_bug.cgi?id=2356">#2356</ulink>,
      <ulink
      url="http://bugzilla.opennms.org/show_bug.cgi?id=2367">#2367</ulink>,
      <ulink
      url="http://bugzilla.opennms.org/show_bug.cgi?id=2384">#2384</ulink>,
      <ulink
      url="http://bugzilla.opennms.org/show_bug.cgi?id=2387">#2387</ulink>,
      <ulink
      url="http://bugzilla.opennms.org/show_bug.cgi?id=2390">#2390</ulink>,
      <ulink
      url="http://bugzilla.opennms.org/show_bug.cgi?id=2420">#2420</ulink>,
      <ulink
      url="http://bugzilla.opennms.org/show_bug.cgi?id=2477">#2477</ulink>,
      <ulink
      url="http://bugzilla.opennms.org/show_bug.cgi?id=2483">#2483</ulink>,
      and <ulink
      url="http://bugzilla.opennms.org/show_bug.cgi?id=2529">#2529</ulink>)</para>

      <para>There is a new parameter that can be used to extract asset
      information for use in events and notices. The parameter
      %asset[fieldname]% will look up the field in the assets table
      represented by "fieldname" for the nodeid in the event. For example:
      %asset[description]% will return the description field. If a field is
      empty or not available it will return "Unknown". (Bug <ulink
      url="http://bugzilla.opennms.org/show_bug.cgi?id=2465">#2465</ulink>)</para>
    </section>

    <section id="opennms-1.5.92-bugfixes">
      <title>Bug Fixes</title>

      <para>A full list of bugs fixed in the release can be found in <ulink
      url="http://bugzilla.opennms.org/buglist.cgi?query_format=advanced&amp;target_milestone=1.5.92+%281.6+beta+3%29&amp;bug_status=VERIFIED&amp;cmdtype=doit">bugzilla</ulink>.</para>
    </section>
  </section>

  <section id="opennms-1.5.91">
    <title>Changes in OpenNMS 1.5.91</title>

    <section id="opennms-1.5.91-features">
      <title>New Features</title>

      <para>The scheduled outage web UI improvements that were partially
      implemented in 1.5.91 are finished. You can now create daily scheduled
      outages.</para>

      <para>OpenNMS XML configuration files will now be validated if xmllint
      is available at startup.</para>
    </section>

    <section id="opennms-1.5.91-bugfixes">
      <title>Bug Fixes</title>

      <para>A number of exceptions and other code errors have been
      fixed.</para>

      <para>A few issues relating to thresholding and data collection have
      been resolved.</para>

      <para>A full list of bugs fixed in the release can be found in <ulink
      url="http://bugzilla.opennms.org/buglist.cgi?query_format=advanced&amp;target_milestone=1.5.91+%281.6+beta+2%29&amp;bug_status=VERIFIED&amp;cmdtype=doit">bugzilla</ulink>.</para>
    </section>
  </section>

  <section id="opennms-1.5.90">
    <title>Changes in OpenNMS 1.5.90</title>

    <section id="opennms-1.5.90-bugfixes">
      <title>Bug Fixes</title>

      <para>NSClient and HTTP collections used to need a "nsclient-collection"
      and "http-collection" parameter (respectively) in
      collectd-configuration.xml. This is now supported, but deprecated, and
      the name changed to "collection", as is the case for SNMP
      collection.</para>

      <para>Data collection from systems supporting the UCD-SNMP SYSSTAT MIB
      group now includes the raw counters for context and interrupts. The
      deprecated one-minute gauge versions of these metrics are still
      collected if the agent provides them, but their resource graphs are no
      longer in the default list.</para>

      <para>A full list of bugs fixed in the release can be found in <ulink
      url="http://bugzilla.opennms.org/showdependencytree.cgi?id=2237&amp;hide_resolved=0">bugzilla</ulink>.
      There were over 70 of them.</para>

      <para>In addition, a number of new event definitions were added. Note
      that the UEIs for Foundry Networks now all read "foundry" whereas before
      some read "foundry" and others read "FoundryNetworks". This will affect
      any notifications based on those UEIs.</para>
    </section>
  </section>

  <section id="opennms-1.3.11">
    <title>Changes in OpenNMS 1.3.11</title>

    <section id="opennms-1.3.11-features">
      <title>New Features</title>

      <para>There are no new features in 1.3.11, but there was one that was
      left out of the description for 1.3.10 that should be mentioned.</para>

      <para>The <ulink
      url="http://www.opennms.org/index.php/Mail_Transport_Monitor">Mail
      Transport Monitor</ulink> tests a mail server by actually sending an
      e-mail and checking that it was received. This can be a very useful for
      measuring the response time of mail systems.</para>
    </section>

    <section id="opennms-1.3.11-bugfixes">
      <title>Bug Fixes</title>

      <para>A lot of changes were made under the covers to the eventd process
      in 1.3.10. One of those changes broke events from interfaces with an IP
      address that exists on more than one node. While not a problem that the
      average person is likely to encounter, it was enough of an issue to
      warrant a fix.</para>
    </section>
  </section>

  <section id="opennms-1.3.10">
    <title>Changes in OpenNMS 1.3.10</title>

    <section id="opennms-1.3.10-features">
      <title>New Features</title>

      <para>OpenNMS now supports an integration with the <ulink
      url="http://www.hyperic.com/products/hq_oss.html">Hyperic HQ</ulink>
      agent. There is a detailed <ulink
      url="http://www.opennms.org/images/a/a4/Hyperic-integration2.pdf">white
      paper</ulink> available that describes the necessary configuration
      changes.</para>

      <para>The classes used to discover and poll NRPE (Nagios Remote Plugin
      Execution) checks from OpenNMS now support the <ulink
      url="http://www.opennms.org/index.php/NRPE_SSL_Support">NRPE protocol
      over secure sockets layer (SSL)</ulink>. Since both the official NRPE
      addon from Nagios and the NRPE listener of NSClient++ use SSL by
      default, the new default in OpenNMS is to use SSL for NRPE.</para>

      <para>OpenNMS now supports <ulink
      url="http://www.opennms.org/index.php/How_to_monitor_windows_services?">discovery
      and monitoring of Windows services</ulink> (even those that do not
      provide network services, such as the Task Scheduler) via the SNMP
      service that ships with Windows.</para>

      <para><ulink
      url="http://www.opennms.org/index.php/Thresholding#Merge_into_collectd">Thresholding</ulink>
      has been (optionally) moved into the collection daemon. Changes to your
      configuration is required to use this new code, but once done,
      thresholds are calculated on data as it is collected. This is
      significantly more efficient (data is not read back from the RRD/JRB
      files on disk), and also removes the need for the "range"
      parameter.</para>

      <para>It is now possible to relocate the /var/opennms and
      /var/log/opennms when installing the RPMs, using the "--relocate" option
      to RPM.</para>
    </section>

    <section id="opennms-1.3.10-bugfixes">
      <title>Bug Fixes</title>

      <para>A large number of bugs were addressed in this release. Bugzilla
      contains <ulink
      url="http://bugzilla.opennms.org/showdependencytree.cgi?id=2108">the
      complete list</ulink>. Also, a large number of changes were made under
      the covers to such processes as eventd.</para>
    </section>
  </section>

  <section id="opennms-1.3.9">
    <title>Changes in OpenNMS 1.3.9</title>

    <section id="opennms-1.3.9-features">
      <title>New Features</title>

      <para>There are a couple of new features in this release:</para>

      <itemizedlist>
        <listitem>
          <para>There is now a way to add and delete groups through the
          webUI.</para>
        </listitem>

        <listitem>
          <para>Users can change their password by clicking on their username
          in the web page header.</para>
        </listitem>

        <listitem>
          <para>Added event definitions for Oracle and ISS events.</para>
        </listitem>
      </itemizedlist>
    </section>

    <section id="opennms-1.3.9-bugfixes">
      <title>Bug Fixes</title>

      <para>In certain cases the number of allowed database connections could
      be completely exhausted, causing discovery and notifications to stop
      working. This has been corrected.</para>
    </section>
  </section>

  <section id="opennms-1.3.8">
    <title>Changes in OpenNMS 1.3.8</title>

    <section id="opennms-1.3.8-features">
      <title>New Features</title>

      <para>There are a number of new features in this release:</para>

      <itemizedlist>
        <listitem>
          <para>RSS Feeds now exist for outages, alarms and
          notifications.</para>
        </listitem>

        <listitem>
          <para>Outage duration is shown in the outage list.</para>
        </listitem>

        <listitem>
          <para>KSC Reports now allow for the number of graphs per line to be
          specified per report.</para>
        </listitem>

        <listitem>
          <para>A new SSH monitor has been created to improve on the old one
          based on the TCP monitor.</para>
        </listitem>

        <listitem>
          <para>Added a "strict timeout" option to monitors to enable
          connection errors to be retried aftet the timeout expires versus
          immediately.</para>
        </listitem>
      </itemizedlist>

      <para>In order to use the "strict timeout" option, simply add it as a
      parameter to your monitor config in poller-configuration.xml:</para>

      <para><programlisting>                &lt;service name="SMTP" interval="300000" user-defined="false" status="on"&gt;
                        &lt;parameter key="retry" value="1"/&gt;
                        &lt;parameter key="timeout" value="3000"/&gt;
                        &lt;parameter key="strict-timeout" value="true"/&gt;
                        &lt;parameter key="port" value="25"/&gt;
                        &lt;parameter key="rrd-repository" value="/opt/opennms/share/rrd/response"/&gt;
                        &lt;parameter key="rrd-base-name" value="smtp"/&gt;
                        &lt;parameter key="ds-name" value="smtp"/&gt;
                &lt;/service&gt;</programlisting></para>

      <para>Probably the biggest new feature is the ability to run on Windows.
      We are testing an installer now and will be releasing it soon.</para>
    </section>

    <section id="opennms-1.3.8-bugfixes">
      <title>Bug Fixes</title>

      <para>As OpenNMS moves closer to the next stable release, the number of
      features will decrease as bug fixes increase. This release is no
      different, with <ulink
      url="http://bugzilla.opennms.org/showdependencytree.cgi?id=2043">lots of
      bugs</ulink> corrected in this version.</para>
    </section>
  </section>

  <section id="opennms-1.3.7">
    <title>Changes in OpenNMS 1.3.7</title>

    <section id="opennms-1.3.7-features">
      <title>New Features</title>

      <para><emphasis>Jetty used instead of Tomcat</emphasis>: OpenNMS now
      runs with its own servlet container using jetty. The default OpenNMS
      port has been moved from 8080 to 8980. Tomcat is not required but can
      still be used if desired.</para>

      <para><emphasis>StrafePing</emphasis>: Based on Tobi Oeticker's <ulink
      url="http://oss.oetiker.ch/smokeping/">SmokePing</ulink>, this new
      monitor will report on ping latency in a nifty new graph. It will send
      out 20 pings every five minutes by default. The monitor can be
      configured to alert on any number of missed pings as well.</para>

      <para><emphasis>New Zoom</emphasis>: The zoom code borrowed from Cacti
      had issues with offsets. The zoom code from SmokePing was brought in to
      replace it. Now all the offsets work well except for Internet Explorer.
      This should be corrected for IE in the next release.</para>

      <para><emphasis>Jira Plugin</emphasis>: Thanks to Johan, there is now a
      Jira trouble ticket plugin to go with the one for <ulink
      url="http://www.opennms.org/index.php/CentricCRM_Trouble_Ticket_Plugin">CentricCRM</ulink>.</para>
    </section>

    <section id="opennms-1.3.7-bugfixes">
      <title>Bug Fixes</title>

      <para><emphasis>Performance</emphasis>: Data collection performance has
      been greatly improved. On one site OpenNMS was able to collect on 15
      variables from 126,000 interfaces on 4467 devices in less than a minute
      with 150 collection threads. Storing this information was a different
      matter, since it really depends on the performance of the disk
      subsystem. OpenNMS will queue the data to be written, so while no data
      is lost it may take some time before a particular file to be updated. In
      the past this resulted in OpenNMS being "behind" - i.e. the last update
      shown on a graph could be several polling cycles old. Since, in the
      above example, only a few of those 126K interfaces would be viewed at
      any one time, new promotion code was added to the webUI that will update
      a file with pending data before it is displayed, thus removing that
      shortcoming. Also, with the removal of Tomcat as a requirement, the
      whole application runs in one VM. This, along with some code changes,
      will show a marked speed improvement in the webUI.</para>

      <para>The complete list of bug fixes in this release can be found in
      <ulink
      url="http://bugzilla.opennms.org/showdependencytree.cgi?id=1918">bugzilla</ulink>.</para>
    </section>

    <section id="opennms-1.3.7-installinfo">
      <title>New Install Methods</title>

      <para>With the removal of the JNI code in release 1.3.6, this has
      enabled the creation of yum and apt repositories for a number of
      operating systems (including a nightly snapshot for the brave). There is
      a <ulink
      url="http://www.opennms.org/index.php/QuickStart">Quickstart</ulink>
      page on the wiki describing these new methods for managaing OpenNMS
      packages and upgrades.</para>
    </section>
  </section>

  <section id="opennms-1.3.6">
    <title>Changes in OpenNMS 1.3.6</title>

    <para>OpenNMS 1.3.6 is the next step in the accelerating release schedule
    toward OpenNMS 2.0. This release is being tagged just before the annual
    Dev-Jam developer's conference to provide a good launch point for the
    development that will happen this week.</para>

    <section id="opennms-1.3.6-features">
      <title>New Features</title>

      <para>There is a new Data Export feature that will export performance
      data stored in the "RRD" files to an XML file that can be used by other
      application (currently only available if you are using JRobin to store
      the data). This feature is accessed by going to a particular URL
      (/opennms/summary/results.htm) and passing four parameters: filterRule:
      a filter rule This is any filter that normally works in OpenNMS, such as
      "ipaddr iplike *.*.*.*" (although I'd worry about using that one with a
      open attributeSieve). startTime (in seconds since epoch) i.e. this is in
      "timeticks" or the value returned with "date %+s" endTime (in seconds
      since epoch) ditto "timeticks" attributeSieve=a regexp that can be
      passed to String.match() to match the attribute name Thus ".*" would
      return all values from all RRDs for the nodes that match the filter
      above. Here's an example using wget:</para>

      <para><programlisting>wget --http-user=admin --http-passwd=admin -O summary.xml \
 'http://172.16.8.100:8180/opennms/summary/results.htm?filterRule=ipaddr+iplike+10.136.123.1&amp;startTime=1184173183&amp;endTime=1185219010&amp;attributeSieve=.*'</programlisting>
      This will return the summary.xml file for all of the variables being
      collected for the node that contains 10.136.123.1. Here's one for
      ifInOctets and ifOutOctets for the whole system:</para>

      <para><programlisting>wget --http-user=tarus.balog --http-passwd=secret -O summary.xml \
'http://172.16.8.100:8180/opennms/summary/results.htm?filterRule=ipaddr+iplike+*.*.*.*&amp;startTime=1184173183&amp;endTime=1185219010&amp;attributeSieve=(ifInOctets|ifOutOctets)'</programlisting></para>

      <para>Speaking of JRobin, some changes have been made to make the graphs
      prettier (thanks to Will Fraley).</para>
    </section>

    <section id="opennms-1.3.6-bugfixes">
      <title>Bug Fixes</title>

      <para>The data collection code has been tweaked yet again to improve
      performance.</para>
    </section>

    <section id="opennms-1.3.6-jni">
      <title>JNI Code Removal</title>

      <para>This release is the first OpenNMS without any JNI code in the
      OpenNMS application or webapp. Previously, OpenNMS needed to be compiled
      on each platform due to slight differences in libraries for the C code
      used to implement iplike (the PostgreSQL function for parsing IP
      addresses), jrrd (the code to integrate OpenNMS with RRDTool) and jicmp
      (the code that let's OpenNMS send pings). Thus these functions must be
      installed separately. While OpenNMS will work without jrrd (it will use
      JRobin to store data), the iplike function should be installed for
      performance reasons (a pg_sql version will be used if iplike is not
      available), and jicmp is pretty much required.</para>

      <para>There are a number of ways to get these functions installed. On
      Sourceforge there are RPMs for many distros and as well as a source
      tarball. The source tarball can be installed using the usual "configure;
      make; make install" method used for most C code. If the operating system
      supports RPMs, then "rpmbuild -tb [tarball]" will create a binary RPM if
      it is not already available.</para>

      <para>In order to make OpenNMS aware of where the code is located, a new
      option has been added to the installer: -l</para>

      <para>Since the default location for these files is "/usr/local/lib"
      this installer would be run similar to:</para>

      <para><programlisting>/opt/opennms/bin/install -l /usr/local/lib -dis</programlisting></para>
    </section>
  </section>

  <section id="opennms-1.3.5">
    <title>Changes in OpenNMS 1.3.5</title>

    <section id="opennms-1.3.5-bugfixes">
      <title>Bug Fixes</title>

      <para>The reason for this release is a bug involving notifications. Due
      to the move toward database independence some code was introduced that
      caused notifications on events with a serviceid of null (such as those
      from traps) to fail. The original problem was misdiagnosed and the
      attempt to fix it, version 1.3.4, made the problem worse. It has been
      correctly resolved in this release. In addition, some major changes were
      made to the way OpenNMS data collection is started in order to use a
      smaller memory footprint and provide better performance.</para>
    </section>
  </section>

  <section id="opennms-1.3.4">
    <title>Changes in OpenNMS 1.3.4</title>

    <section id="opennms-1.3.4-features">
      <title>New Features</title>

      <para>The only new feature is the ability to invert the result of a
      monitor. By adding the parameter "invert-status" to a monitor, up
      becomes down, and down becomes up. Useful for monitoring things, like an
      ISDN link, that indicate a problem when they are available. This was
      available for ICMP in 1.2.x, but it has now been ported to deal with all
      monitors.</para>

      <para>An example of how to use this is as follows. Suppose there are a
      number of IP addresses on the network that represent ISDN backup lines.
      Thus a successful "ping" to those IPs means that there is a problem with
      the network. In other words, up is down.</para>

      <para>First, there needs to be a service in
      <filename>capsd-configuraion.xml</filename> that defines the "not" ICMP
      service:</para>

      <para><programlisting>    &lt;protocol-plugin protocol="NotICMP" class-name="org.opennms.netmgt.capsd.plugins.IcmpPlugin" scan="off" user-defined="false"&gt;
        &lt;property key="timeout" value="2000" /&gt;
        &lt;property key="retry" value="1" /&gt;
    &lt;/protocol-plugin&gt;</programlisting></para>

      <para>Note that the scan for this service is "off". There are a number
      of ways to add services to IP addresses, but an easy one is to use the
      <filename>send-event.pl</filename> script to send an event to add the
      service directly:</para>

      <para><programlisting>send-event.pl uei.opennms.org/internal/capsd/updateService localhost \
 --interface 172.20.1.12 \
 --service NotICMP \
 --parm 'nodelabel kenny.opennms.com' \
 --parm 'action ADD'</programlisting></para>

      <para>This will add the NotICMP service to the node "kenny.opennms.com"
      on interface "172.20.1.12". Repeat for all other ISDN links.</para>

      <para>Finally the poller has to be told to poll this service. Edit
      poller-configuration.xml and add:</para>

      <programlisting>                &lt;service name="NotICMP" interval="300000" user-defined="false" status="on"&gt;
                        &lt;parameter key="invert-status" value="true"/&gt;
                        &lt;parameter key="retry" value="2"/&gt;
                        &lt;parameter key="timeout" value="3000"/&gt;
                        &lt;parameter key="rrd-repository" value="/opt/opennms/share/rrd/response"/&gt;
                        &lt;parameter key="ds-name" value="noticmp"/&gt;
                &lt;/service&gt;</programlisting>

      <para>and remember to put the monitor at the bottom:</para>

      <para><programlisting>        &lt;monitor service="NotICMP"      class-name="org.opennms.netmgt.poller.monitors.IcmpMonitor"/&gt;</programlisting></para>

      <para>The key here is the "invert-status" property. This should work
      with every monitor in the application.</para>
    </section>

    <section id="opennms-1.3.4-bugfixes">
      <title>Bug Fixes</title>

      <para>The reason for this release is a bug involving notificiations. In
      1.3.3 the ability to match on severities was introduced. For example,
      you could send a notice on any even that was "Critical". Unfortunately,
      there was an unfortunately long "if" statement that got pooched when
      this feature was added. It blocked notifications based on traps. In
      addition, there was a bug with packages with just &lt;specific&gt; tags
      (no include-range tags) passing all IP addresses that has been
      addressed.</para>
    </section>
  </section>

  <section id="opennms-1.3.3">
    <title>Changes in OpenNMS 1.3.3</title>

    <section id="opennms-1.3.3-features">
      <title>New Features</title>

      <para>In an attempt to get the release out as fast as possible, we've
      decided to track new features on the OpenNMS wiki's <ulink
      url="http://www.opennms.org/index.php/New_and_noteworthy">New and Noteworthy</ulink>
      page.</para>

      <para>However, there are two main "gotchas" of which to be aware.</para>

      <para>The first is that the default RRD file storage has changed. If you
      want to use the new format, you will need to delete your old RRD/JRobin
      data. OpenNMS was storage an incredibly large amount of data, especially
      compared to projects like MRTG. It will now store "as polled" 5 minute
      samples for a week, hourly samples for two months and daily MIN, MAX and
      AVERAGE for a year. This reduces the size of the RRD files by more than
      80%.</para>

      <para>The second one is that the installer no longer installs the
      Postgresql "iplike" function. It needs to be installed as a separate
      package (if it already exists in the running installation of Postgresql,
      then nothing else needs to be done). If the installer does not find
      iplike it will install a platform independent psql version. That version
      will work but at a lower performance than the native C code
      version.</para>
    </section>

  </section>

  <section id="opennms-1.3.2">
    <title>Changes in OpenNMS 1.3.2</title>

    <section id="opennms-1.3.2-bugfixes">
      <title>Bug Fixes</title>

      <para>SNMP interface descriptions are no longer printed in hex if they
      contain unprintable characters. In particular, this was seen on
      Microsoft Windows platforms with the default Windows SNMP daemon.</para>
    </section>

    <section id="opennms-1.3.2-features">
      <title>New Features</title>

      <section>
        <title>NSClient support</title>

        <para>An <ulink url="http://nsclient.ready2run.nl/">NSClient</ulink>
        poller and capsd plugin have been contributed by <ulink
        url="mailto:matt.raykowski@gmail.com">Matt Raykowski</ulink>. This
        allows performance counters on Microsoft Windows platform to be
        queried, with the help of the NSClient agent software on the Windows
        side. No data collection is performed at this time.</para>

        <para>For testing, you can run the NsclientManager implementation
        directly:</para>

        <para><programlisting><command>java -cp $OPENNMS_HOME/lib/opennms_services.jar &lt;hostname&gt; &lt;command&gt; &lt;criticalPercent&gt; &lt;warningPercent&gt; &lt;parameter&gt;</command></programlisting></para>

        <para>Here are a couple of example tests using the command-line
        tool:<orderedlist>
            <listitem>
              <para>Testing the client version:<programlisting><command>java -cp $OPENNMS_HOME/lib/opennms_services.jar org.opennms.netmgt.poller.nsclient.CheckNsc &lt;hostname&gt; CLIENTVERSION 0 0 "1.0.7.0"</command></programlisting></para>
            </listitem>

            <listitem>
              <para>Testing NT services:</para>

              <para><programlisting><command>java -cp $OPENNMS_HOME/lib/opennms_services.jar org.opennms.netmgt.poller.nsclient.CheckNsc &lt;hostname&gt; USEDDISKSPACE 95 90 "C:"</command></programlisting></para>
            </listitem>

            <listitem>
              <para>Testing memory usage:</para>

              <para><programlisting><command>java -cp $OPENNMS_HOME/lib/opennms_services.jar org.opennms.netmgt.poller.nsclient.CheckNsc &lt;hostname&gt; MEMUSE 95 90 ""</command></programlisting></para>
            </listitem>
          </orderedlist></para>

        <para>Available commands:</para>

        <glosslist>
          <glossentry>
            <glossterm>CLIENTVERSION</glossterm>

            <glossdef>
              <para>This check uses the parameter property only. This string
              must be formatted like "#.#.#.#" or empty. If you provide a
              number, such as "1.0.7.0", you are specifying the minimum
              version supported, any version lower than this parameter will
              return 'critical'. If you do not specify a parameter (for
              example, supplying "") the check always returns 'okay' and will
              provide the version number in the response.</para>

              <para>Using CLIENTVERSION in capsd:</para>

              <para><programlisting>&lt;protocol-plugin protocol="NSC-CLIENTVERSION" class-name="org.opennms.netmgt.capsd.plugins.NsclientPlugin" scan="on" user-defined="false"&gt;
  &lt;property key="port" value="1248" /&gt;
  &lt;property key="timeout" value="3000" /&gt;
  &lt;property key="retry" value="2" /&gt;
  &lt;property key="command" value="CLIENTVERSION" /&gt;
  &lt;!-- parameter is optional, if you want to do version checking
    &lt;property key="parameter" value="1.0.7.0" /&gt;
  --&gt;
&lt;/protocol-plugin&gt;</programlisting></para>
            </glossdef>
          </glossentry>

          <glossentry>
            <glossterm>CPULOAD</glossterm>

            <glossdef>
              <para>This check uses the warningPercent and criticalPercent
              properties only. These values must be integers in percentage
              format.</para>

              <para>Using CPULOAD in capsd:</para>

              <para><programlisting>&lt;protocol-plugin protocol="NSC-CPULOAD" class-name="org.opennms.netmgt.capsd.plugins.NsclientPlugin" scan="on" user-defined="false"&gt;
  &lt;property key="port" value="1248" /&gt;
  &lt;property key="timeout" value="3000" /&gt;
  &lt;property key="retry" value="2" /&gt;
  &lt;property key="command" value="CPULOAD" /&gt;
  &lt;property key="warningPercent" value="90" /&gt;
  &lt;property key="criticalPercent" value="95" /&gt;
&lt;/protocol-plugin&gt;</programlisting></para>
            </glossdef>
          </glossentry>

          <glossentry>
            <glossterm>UPTIME</glossterm>

            <glossdef>
              <para>This check simply returns the uptime of the system. No
              validation is performed.</para>
            </glossdef>
          </glossentry>

          <glossentry>
            <glossterm>USEDDISKSPACE</glossterm>

            <glossdef>
              <para>This check uses the warningPercent and criticalPercent
              properties to determine thresholds. These values must be
              integers and they should be in percentage form (e.g. 1-100.) The
              parameter property is used to determine the drive letter, either
              "C" or "C:" can be used. Some older services have mixed support,
              so try adding/removing the ':' if you are experiencing
              problems.</para>

              <para>Using USEDDISKSPACE in capsd:</para>

              <para><programlisting>&lt;protocol-plugin protocol="NSC-C-SPACE" class-name="org.opennms.netmgt.capsd.plugins.NsclientPlugin" scan="on" user-defined="false"&gt;
  &lt;property key="port" value="1248" /&gt;
  &lt;property key="timeout" value="3000" /&gt;
  &lt;property key="retry" value="2" /&gt;
  &lt;property key="command" value="USEDDISKSPACE" /&gt;
  &lt;property key="warningPercent" value="90" /&gt;
  &lt;property key="criticalPercent" value="95" /&gt;
  &lt;property key="parameter" value="C:" /&gt;
&lt;/protocol-plugin&gt;</programlisting></para>
            </glossdef>
          </glossentry>

          <glossentry>
            <glossterm>SERVICESTATE</glossterm>

            <glossdef>
              <para>This check determines the status of NT services on a
              remove server. This check only uses the parameter property. The
              parameter property should contain a comma delimited list of
              services you would like the status of.</para>

              <para>Using SERVICESTATE in capsd:</para>

              <para><programlisting>&lt;protocol-plugin protocol="NSC-SERVICE-SERVERS" class-name="org.opennms.netmgt.capsd.plugins.NsclientPlugin" scan="on" user-defined="false"&gt;
  &lt;property key="port" value="1248" /&gt;
  &lt;property key="timeout" value="3000" /&gt;
  &lt;property key="retry" value="2" /&gt;
  &lt;property key="command" value="SERVICESTATE" /&gt;
  &lt;property key="parameter" value="Eventlog,lanmanserver,Netlogon,RpcSs" /&gt;
&lt;/protocol-plugin&gt;</programlisting></para>
            </glossdef>
          </glossentry>

          <glossentry>
            <glossterm>PROCSTATE</glossterm>

            <glossdef>
              <para>This check determines whether or not a list of processes
              are running on a remote server. This check only uses the
              parameter property. The parameter property should contain a
              comma delimited list of processes you want to determine the
              status of.</para>

              <para>Using PROCSTATE in capsd:</para>

              <para><programlisting>&lt;protocol-plugin protocol="NSC-PROCESS-NAVISPHERE" class-name="org.opennms.netmgt.capsd.plugins.NsclientPlugin" scan="on" user-defined="false"&gt;
  &lt;property key="port" value="1248" /&gt;
  &lt;property key="timeout" value="3000" /&gt;
  &lt;property key="retry" value="2" /&gt;
  &lt;property key="command" value="SERVICESTATE" /&gt;
  &lt;property key="parameter" value="naviagent.exe,EmcPowSrv.exe" /&gt;
&lt;/protocol-plugin&gt;</programlisting></para>
            </glossdef>
          </glossentry>

          <glossentry>
            <glossterm>MEMUSE</glossterm>

            <glossdef>
              <para>This check uses the warningPercent and criticalPercent
              properties only. These values must be integers in percentage
              format.</para>

              <para>Using MEMUSE in capsd:</para>

              <para><programlisting>&lt;protocol-plugin protocol="NSC-MEMORY" class-name="org.opennms.netmgt.capsd.plugins.NsclientPlugin" scan="on" user-defined="false"&gt;
  &lt;property key="port" value="1248" /&gt;
  &lt;property key="timeout" value="3000" /&gt;
  &lt;property key="retry" value="2" /&gt;
  &lt;property key="command" value="MEMUSE" /&gt;
  &lt;property key="warningPercent" value="90" /&gt;
  &lt;property key="criticalPercent" value="95" /&gt;
&lt;/protocol-plugin&gt;</programlisting></para>
            </glossdef>
          </glossentry>

          <glossentry>
            <glossterm>COUNTER</glossterm>

            <glossdef>
              <para>This check is used to check the PerfMon OID objects on a
              remote Windows server. This check uses the warningPercent and
              criticalPercent properties as <emphasis>values</emphasis>. These
              values may or may not actually be in percentage format. You will
              have to use discretion when setting these up and read the
              documentation for the specific PerfMon OID that you will be
              monitoring. It also uses the parameter property to define the
              PerfMon OID that you will be monitoring.</para>

              <para>Using COUNTER in capsd:</para>

              <para><programlisting>&lt;protocol-plugin protocol="NSC-PRINT-QUEUE" class-name="org.opennms.netmgt.capsd.plugins.NsclientPlugin" scan="on" user-defined="false"&gt;
  &lt;property key="port" value="1248" /&gt;
  &lt;property key="timeout" value="3000" /&gt;
  &lt;property key="retry" value="2" /&gt;
  &lt;property key="command" value="COUNTER" /&gt;
  &lt;property key="warningPercent" value="10" /&gt;
  &lt;property key="criticalPercent" value="20" /&gt;
  &lt;property key="parameter" value="\Print Queue(_Total)\Jobs" /&gt;
&lt;/protocol-plugin&gt;</programlisting></para>
            </glossdef>
          </glossentry>

          <glossentry>
            <glossterm>FILEAGE</glossterm>

            <glossdef>
              <para>This check is used to determine the age of a specified
              file on the remote server. This check uses the warningPercent
              and criticalPercent properties as <emphasis>values</emphasis>.
              These values will be the newest age of the file allowed in
              <emphasis>minutes</emphasis>. For example, if you set the
              criticalPercent to 60 then a file that is 59 minutes or
              <emphasis>newer</emphasis> will result in a critical response
              from the manager. This check uses the parameter property to
              determine the <emphasis>full path</emphasis> of the file to be
              monitored. This check is useful for monitoring log files or
              other files that may collect critical events or files that
              should rarely change. Note: This check does not yet support
              using the modified date response supplied by the server.</para>

              <para>Using FILEAGE in capsd:</para>

              <para><programlisting>&lt;protocol-plugin protocol="NSC-SYSTEMFILES" class-name="org.opennms.netmgt.capsd.plugins.NsclientPlugin" scan="on" user-defined="false"&gt;
  &lt;property key="port" value="1248" /&gt;
  &lt;property key="timeout" value="3000" /&gt;
  &lt;property key="retry" value="2" /&gt;
  &lt;property key="command" value="FILEAGE" /&gt;
  &lt;property key="warningPercent" value="0" /&gt;
  &lt;property key="criticalPercent" value="525600" /&gt; &lt;!-- two years --&gt;
  &lt;property key="parameter" value="C:\autoexec.bat" /&gt;
&lt;/protocol-plugin&gt;</programlisting></para>
            </glossdef>
          </glossentry>
        </glosslist>
      </section>
    </section>
  </section>

  <section id="opennms-1.3.1">
    <title>Changes in OpenNMS 1.3.1</title>

    <section id="opennms-1.3.1-bugfixes">
      <title>Bug Fixes</title>

      <para>A potential database connection leak was discovered in 1.3.0 and
      this release was generated to include that fix.</para>
    </section>

    <section id="opennms-1.3.1-features">
      <title>New Features</title>

      <para>There are no new features in 1.3.1, but more work was done on the
      NRPE client code.</para>

      <para>One problem with OpenNMS comes from upgrading. If a new feature
      like NRPE support is added, the configuration files are often modified
      to provide examples of the new feature.</para>

      <para>This causes problems when upgrading, since a change to the default
      file will often result in an .rpmnew file being generated, requiring a
      manual merge.</para>

      <para>The existing configuration files have been streamlined to only
      include those features most likely to be used by end users, and the more
      exotic configuration options will now be shown in example files, found
      in the <filename>$OPENNMS_HOME/etc/examples</filename> directory. The
      default files should thus be less likely to change and require less
      effort during an upgrade.</para>
    </section>
  </section>

  <section id="opennms-1.3.0">
    <title>Changes in OpenNMS 1.3.0</title>

    <section id="opennms-1.3.0-bugfixes">
      <title>Bug Fixes</title>

      <para>There have been entire sections of OpenNMS rewritten to accomodate
      the new features and to make the product more scalable. Please visit the
      <filename>CHANGELOG</filename> for a better list.</para>
    </section>

    <section id="opennms-1.3.0-features">
      <title>New Features</title>

      <para>As with many open source projects, the OpenNMS documentation could
      be better. For many of the new and somewhat complex features in this
      development release, please refer to the Wiki page for that particular
      feature.</para>

      <bridgehead>SNMP version 3 Support</bridgehead>

      <para>Support for SNMP version 3, both Authentication and Privacy, for
      polling and data collection. Trap support is soon to follow. For
      detailed information see:</para>

      <para><ulink
      url="http://www.opennms.org/wiki/index.php?page=SnmpV3Configuration">http://www.opennms.org/wiki/index.php?page=SnmpV3Configuration</ulink></para>

      <bridgehead>JMX Polling and Data Collection</bridgehead>

      <para>OpenNMS is written in Java. We like Java. But one of the
      shortcomings is that it is hard to determine what resources are being
      used within the virtual machine. The java process might be using 512 MB,
      but how much of that is the actual application within the machine using?
      Close to all of it? Very little?</para>

      <para>The new JMX poller and data collector will allow for this
      information from within the virtual machine to be used in pollers and
      collectors. Also note this is our first non-SNMP based data
      collector.</para>

      <para>More Information: <ulink
      url="http://www.opennms.org/wiki/index.php?page=JMXConfiguration">http://www.opennms.org/wiki/index.php?page=JMXConfiguration</ulink></para>

      <para>Serious kudos to Mike Jamison for his work on bringing this to
      OpenNMS.</para>

      <bridgehead>Alarms</bridgehead>

      <para>What happens if you get lots of the same event? It has the ability
      to clog up the event browser. In the office there is a Linksys router
      that sends an SNMP trap on every network connection (over 100,000 a day
      sometimes).</para>

      <para>The new alarms system will allow important events to be "reduced"
      into alarms. If an event comes in with the same "reduction key" as a
      previous event, the alarm will increment the "count" of events, yet it
      will still only take up a single line in the alarm browser. Clicking on
      the count will bring up the event browser with just the events that have
      been reduced.</para>

      <para>More Information: <ulink
      url="http://www.opennms.org/wiki/index.php?page=Alarms">http://www.opennms.org/wiki/index.php?page=Alarms</ulink></para>

      <bridgehead>Automations</bridgehead>

      <para>OpenNMS provides you with a more robust solution by automating its
      behavior to meet the requirements of your business or organization. For
      example, say you have an alarm with the severity of Minor that has not
      been acknowledged in the last 20 minutes you might want to escalate the
      severity. As of version 1.2, OpenNMS has a daemon that runs SQL
      statements on an interval called Vacuumd. Its configuration has been
      enhanced with a configuration that now allows configuration of processes
      we're calling Automations that are defined by Triggers and
      Actions.</para>

      <para>More Information: <ulink
      url="http://www.opennms.org/wiki/index.php?page=Automations">http://www.opennms.org/wiki/index.php?page=Automations</ulink></para>

      <bridgehead>Roles</bridgehead>

      <para>This is a new feature for managing Notifications. If you have,
      say, an On-Call role where the users change over time, this feature
      allows you to schedule them in advance and OpenNMS will manage that
      schedule for you.</para>

      <para>More Information: <ulink
      url="http://www.opennms.org/wiki/index.php?page=Roles">http://www.opennms.org/wiki/index.php?page=Roles</ulink></para>

      <bridgehead>Group Duty Schedules</bridgehead>

      <para>Bill Ayres wrote a nifty feature called Group Duty Schedules. You
      add them just as you would add Duty Schedules to users. If a Group is
      listed as a target in a destination path, the duty schedule will apply
      to the whole group (individual users and roles also in the target are
      not affected).</para>

      <para>The best part of this feature is that the notices are still
      created (and will show up on the main page). However, if a notice that
      is created while a group is off duty has not been acknowledged by the
      time they come on duty, it will be sent. So if there are, say, a group
      of servers that you wish to monitor but don't wish to be paged about in
      the middle of the night, you can use this feature so you know about them
      when you come back on duty the next business day.</para>

      <bridgehead>New HTTP Monitor</bridgehead>

      <para>The HTTP Monitor has been improved to handle virtual domains,
      different clients, etc. It was based in large part on work done by
      Erasmo Zubillaga (Bug 919).</para>

      <para>More Information: <ulink
      url="http://www.opennms.org/wiki/index.php?page=HttpMonitor">http://www.opennms.org/wiki/index.php?page=HttpMonitor</ulink></para>

      <bridgehead>JFreeChart Support</bridgehead>

      <para>You will notice that on the front page of the OpenNMS webUI there
      are a number of charts displaying information from the OpenNMS database.
      OpenNMS now supports a JFreeChart integration. It currently only
      supports bar charts, and the configuration is controlled by the
      <filename>chart-configuration.xml </filename>file.</para>

      <para>More Information: <ulink
      url="http://www.opennms.org/wiki/index.php?page=JFreeChartSupport">http://www.opennms.org/wiki/index.php?page=JFreeChartSupport</ulink></para>

      <bridgehead>Zoom Feature for RRDs</bridgehead>

      <para>Borrowed from Cacti, Mike Huot has created the ability to zoom in
      on RRD graphs within OpenNMS. Simply click on a graph to bring it up in
      a new window, and then drag the mouse to highlight the region you want
      to zoom. You can zoom in multiple times. Hit the back button on your
      browser to zoom out.</para>

      <bridgehead>New Look to Availability Reports</bridgehead>

      <para>Jonathan Sartin has made some nice changes to the Availability
      Reports look. Instead of bar graphs you get a calendar with colored
      circles representing the availability level with the actual availability
      number inside the circle. Just choose "Calendar" format when generating
      the reports to see the new style.</para>
    </section>
  </section>

</chapter>
